%h1.title Users

- if @fallback.nil?
  %h3.center.slightly-red
    No fallback user!
    = link_to 'Select a fallback user', edit_roster_path(@roster)

%div.container-fluid
  %div.col-xs-7
    = link_to 'Add new user', new_roster_user_path, class: 'btn btn-primary'
  %div.col-xs-2
    -  if @other_users.present?
      .form
        Add existing user:
        = form_tag transfer_roster_users_path do
          = select_tag :id,
                options_from_collection_for_select(@other_users, :id, :last_name)
  %div.col-xs-1
    = submit_tag 'Add', class: 'btn btn-primary btn-sm'

%table.table
  %thead
    %tr
      %th Name
      %th SPIRE
      %th Email
      %th Phone
      %th
      %th
  %tbody
    - @users.each do |user|
      %tr
        %td
          = user.full_name
          - if user == @fallback
            (fallback)
        %td= user.spire
        %td= user.email
        %td= user.phone
        %td= link_to 'Edit', edit_roster_user_path(@roster, user), class: 'btn btn-info'
        %td= button_to 'Destroy', roster_user_path(@roster, user), method: :delete, class: 'btn btn-danger'